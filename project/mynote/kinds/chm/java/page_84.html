<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD><TITLE>动态代理</TITLE>
<META content="text/html; charset=utf-8" http-equiv=Content-Type>
<META name=GENERATOR content="MSHTML 11.00.10570.1001"></HEAD>
<BODY>
<P class=footer><FONT color=#ff0000 size=5 
face=Verdana><STRONG>2、动态代理【掌握】</STRONG></FONT> 
<DIV class=footer>
<HR>
</DIV>
<P class=footer></P>
<P class=footer><STRONG><FONT color=#ff0000 
size=5>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2.1 
JDK的动态代理</FONT></STRONG>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </P>
<BLOCKQUOTE class=footer style="MARGIN-RIGHT: 0px" dir=ltr>
  <DIV>创建UserDao</DIV>
  <BLOCKQUOTE style="MARGIN-RIGHT: 0px" dir=ltr>
    <DIV style="MARGIN-RIGHT: 0px" dir=ltr><FONT color=#0000ff>package 
    com.hjh.dao; </FONT></DIV>
    <DIV style="MARGIN-RIGHT: 0px" dir=ltr><BR><FONT color=#0000ff>public 
    interface UserDao {<BR>&nbsp;<BR>&nbsp;public void 
    save();<BR>&nbsp;<BR>&nbsp;public void 
  delete();<BR>&nbsp;<BR>}</FONT></DIV></BLOCKQUOTE>
  <DIV>创建PersonDao</DIV>
  <BLOCKQUOTE style="MARGIN-RIGHT: 0px" dir=ltr>
    <DIV>
    <DIV><FONT color=#0000ff>package com.hjh.dao;</FONT></DIV>
    <DIV><FONT color=#0000ff></FONT>&nbsp;</DIV>
    <DIV><BR><FONT color=#0000ff>public interface PersonDao 
    {<BR>&nbsp;<BR>&nbsp;public void 
  update();<BR>&nbsp;<BR>}</FONT></DIV></DIV></BLOCKQUOTE>
  <DIV>创建UserDaoImpl</DIV>
  <BLOCKQUOTE style="MARGIN-RIGHT: 0px" dir=ltr>
    <DIV>
    <DIV><FONT color=#0000ff>package com.hjh.dao.impl;</FONT></DIV>
    <DIV><FONT color=#0000ff></FONT>&nbsp;</DIV>
    <DIV><FONT color=#0000ff>import com.hjh.dao.PersonDao;<BR>import 
    com.hjh.dao.UserDao;</FONT></DIV>
    <DIV><FONT color=#0000ff></FONT>&nbsp;</DIV>
    <DIV><FONT color=#0000ff>public class UserDaoImpl implements 
    UserDao,PersonDao {</FONT></DIV>
    <DIV><FONT color=#0000ff></FONT>&nbsp;</DIV>
    <DIV><FONT color=#0000ff>&nbsp;@Override<BR>&nbsp;public void save() 
    {<BR>&nbsp;&nbsp;System.out.println("保存过程中~~~");<BR>&nbsp;}</FONT></DIV>
    <DIV><FONT color=#0000ff></FONT>&nbsp;</DIV>
    <DIV><FONT color=#0000ff>&nbsp;@Override<BR>&nbsp;public void delete() 
    {<BR>&nbsp;&nbsp;System.out.println("删除过程");<BR>&nbsp;}</FONT></DIV>
    <DIV><FONT color=#0000ff></FONT>&nbsp;</DIV>
    <DIV><FONT color=#0000ff>&nbsp;@Override<BR>&nbsp;public void update() 
    {<BR>&nbsp;&nbsp;System.out.println("正在更新中");<BR>&nbsp;}</FONT></DIV>
    <DIV><FONT color=#0000ff></FONT>&nbsp;</DIV>
    <DIV><FONT color=#0000ff><BR>}</FONT></DIV></DIV></BLOCKQUOTE>
  <DIV>&nbsp;</DIV>
  <DIV>创建PersonDaoImpl</DIV>
  <BLOCKQUOTE style="MARGIN-RIGHT: 0px" dir=ltr>
    <DIV>
    <DIV><FONT color=#0000ff>package com.hjh.dao.impl;</FONT></DIV>
    <DIV><FONT color=#0000ff></FONT>&nbsp;</DIV>
    <DIV><FONT color=#0000ff>import com.hjh.dao.PersonDao;</FONT></DIV>
    <DIV><FONT color=#0000ff></FONT>&nbsp;</DIV>
    <DIV><FONT color=#0000ff>public class PersonDaoImpl implements PersonDao 
    {</FONT></DIV>
    <DIV><FONT color=#0000ff></FONT>&nbsp;</DIV>
    <DIV><FONT color=#0000ff>&nbsp;@Override<BR>&nbsp;public void update() 
    {<BR>&nbsp;&nbsp;System.out.println("正在更新中");<BR>&nbsp;}</FONT></DIV>
    <DIV><FONT color=#0000ff></FONT>&nbsp;</DIV>
    <DIV><FONT color=#0000ff>}</FONT></DIV></DIV></BLOCKQUOTE>
  <DIV>&nbsp;</DIV>
  <DIV>创建代理工厂ProxyFactory</DIV>
  <BLOCKQUOTE style="MARGIN-RIGHT: 0px" dir=ltr>
    <DIV>
    <DIV><FONT color=#0000ff>package com.hjh.proxy;</FONT></DIV>
    <DIV><FONT color=#0000ff></FONT>&nbsp;</DIV>
    <DIV><FONT color=#0000ff>import 
    java.lang.reflect.InvocationHandler;<BR>import 
    java.lang.reflect.Method;<BR>import java.lang.reflect.Proxy;</FONT></DIV>
    <DIV><FONT color=#0000ff></FONT>&nbsp;</DIV>
    <DIV><FONT color=#0000ff>/**<BR>&nbsp;* 代理工厂<BR>&nbsp;* @author 
    hjh<BR>&nbsp;*<BR>&nbsp;*/<BR>public class ProxyFactory 
    {<BR>&nbsp;/**<BR>&nbsp; * 目标对象<BR>&nbsp; */<BR>&nbsp;private Object 
    target;<BR>&nbsp;<BR>&nbsp;/**<BR>&nbsp; * 初始化目标对象<BR>&nbsp; * @param 
    target<BR>&nbsp; */<BR>&nbsp;public ProxyFactory(Object target) 
    {<BR>&nbsp;&nbsp;this.target = target;<BR>&nbsp;}</FONT></DIV>
    <DIV><FONT color=#0000ff></FONT>&nbsp;</DIV>
    <DIV><FONT color=#0000ff>&nbsp;/**<BR>&nbsp; * 获取代理对象的方法<BR>&nbsp; 
    */<BR>&nbsp;public Object getProxyInstance() {<BR>&nbsp;&nbsp;return 
    Proxy.newProxyInstance(<BR>&nbsp;&nbsp;&nbsp;&nbsp;target.getClass().getClassLoader(), 
    <BR>&nbsp;&nbsp;&nbsp;&nbsp;target.getClass().getInterfaces(), 
    <BR>&nbsp;&nbsp;&nbsp;&nbsp;new InvocationHandler() 
    {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@Override<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public 
    Object invoke(Object proxy, Method method, Object[] args) throws Throwable 
    {<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;startTransaction();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Object 
    invoke = method.invoke(target, 
    args);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;endTransaction();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return 
    invoke;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR>&nbsp;&nbsp;&nbsp;&nbsp;});<BR>&nbsp;}<BR>&nbsp;<BR>&nbsp;/*<BR>&nbsp; 
    * 开启前置增强<BR>&nbsp; */<BR>&nbsp;public void startTransaction() 
    {<BR>&nbsp;&nbsp;System.out.println("开启事务");<BR>&nbsp;}<BR>&nbsp;<BR>&nbsp;/*<BR>&nbsp; 
    * 开启后置增强<BR>&nbsp; */<BR>&nbsp;public void endTransaction() 
    {<BR>&nbsp;&nbsp;System.out.println("提交事务");<BR>&nbsp;&nbsp;System.out.println("关闭资源");<BR>&nbsp;}<BR>}<BR></FONT></DIV></DIV></BLOCKQUOTE>
  <DIV>测试类</DIV>
  <BLOCKQUOTE style="MARGIN-RIGHT: 0px" dir=ltr>
    <DIV><FONT color=#0000ff>package com.hjh.test;</FONT></DIV>
    <DIV><FONT color=#0000ff></FONT>&nbsp;</DIV>
    <DIV><FONT color=#0000ff>import com.hjh.dao.PersonDao;<BR>import 
    com.hjh.dao.UserDao;<BR>import com.hjh.dao.impl.UserDaoImpl;<BR>import 
    com.hjh.proxy.ProxyFactory;</FONT></DIV>
    <DIV><FONT color=#0000ff></FONT>&nbsp;</DIV>
    <DIV><FONT color=#0000ff>public class TestUser {<BR>&nbsp;public static void 
    main(String[] args) {<BR>&nbsp;&nbsp;// 创建目标对象<BR>&nbsp;&nbsp;UserDao 
    userDao = new UserDaoImpl();<BR>&nbsp;&nbsp;<BR>&nbsp;&nbsp;// 
    创建代理工厂<BR>&nbsp;&nbsp;ProxyFactory proxyFactory = new 
    ProxyFactory(userDao);<BR>&nbsp;&nbsp;<BR>&nbsp;&nbsp;// 
    创建代理对象<BR>&nbsp;&nbsp;UserDao proxyDao = (UserDao) 
    proxyFactory.getProxyInstance();<BR>&nbsp;<BR>&nbsp;&nbsp;//proxyDao.save();<BR>&nbsp;&nbsp;//proxyDao.delete();<BR>&nbsp;&nbsp;<BR>&nbsp;&nbsp;PersonDao 
    personDao = (PersonDao) 
    proxyFactory.getProxyInstance();<BR>&nbsp;&nbsp;personDao.update();<BR>&nbsp;}<BR>}</FONT></DIV><FONT 
    color=#0000ff></FONT></BLOCKQUOTE><FONT color=#0000ff></BLOCKQUOTE>
<BLOCKQUOTE style="MARGIN-RIGHT: 0px" dir=ltr>
  <DIV style="MARGIN-RIGHT: 0px" dir=ltr><FONT color=#000000><B>动态代理有以下<SPAN 
  style="BACKGROUND-COLOR: rgb(255,255,0)" 
  data-wiz-span="data-wiz-span">特点</SPAN>:</B><BR></FONT></DIV>
  <BLOCKQUOTE 
  style="PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px 0px 0px 40px; PADDING-RIGHT: 0px; border-image: none" 
  dir=ltr>
    <DIV><FONT color=#000000>1.代理对象,不需要实现接口</FONT></DIV>
    <DIV><FONT 
    color=#000000>2.代理对象的生成,是利用JDK的API,动态的在内存中构建代理对象(需要我们指定创建代理对象/目标对象实现的接口的类型)</FONT></DIV>
    <DIV><FONT color=#000000>3.动态代理也叫做:JDK代理,接口代理</FONT><BR></DIV></BLOCKQUOTE>
  <DIV style="MARGIN-RIGHT: 0px" dir=ltr><FONT 
  color=#000000><B>JDK中生成代理对象的API</B><BR></FONT></DIV>
  <DIV style="MARGIN-RIGHT: 0px" dir=ltr><FONT 
  color=#000000>代理类所在包:java.lang.reflect.Proxy<BR></FONT></DIV>
  <DIV style="MARGIN-RIGHT: 0px" dir=ltr><FONT 
  color=#000000>JDK实现代理只需要使用newProxyInstance方法,但是该方法需要接收三个参数,完整的写法是:</FONT></DIV>
  <BLOCKQUOTE style="MARGIN-RIGHT: 0px" dir=ltr>
    <BLOCKQUOTE style="MARGIN-RIGHT: 0px" dir=ltr>
      <DIV><FONT color=#000000><PRE role=presentation class=CodeMirror-line><SPAN role=presentation style="PADDING-RIGHT: 0px"><SPAN class=cm-keyword><FONT color=#770088>static</FONT></SPAN> <SPAN class=cm-type>Object</SPAN> <SPAN class=cm-def><FONT color=#0000ff>newProxyInstance</FONT></SPAN>(<SPAN class=cm-variable>ClassLoader</SPAN> <SPAN class=cm-variable>loader</SPAN>, <SPAN class=cm-variable>Class</SPAN><SPAN class=cm-operator>&lt;?&gt;</SPAN>[] <SPAN class=cm-variable>interfaces</SPAN>,<SPAN class=cm-variable>InvocationHandler</SPAN> <SPAN class=cm-variable>h</SPAN> )</SPAN></PRE></DIV></BLOCKQUOTE></BLOCKQUOTE><SPAN 
  role=presentation style="PADDING-RIGHT: 0px"><PRE>注意该方法是在Proxy类中是静态方法,且接收的三个参数依次为:</PRE><PRE role=presentation class=CodeMirror-line dir=ltr><BLOCKQUOTE style="PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px 0px 0px 40px; PADDING-RIGHT: 0px; border-image: none"><DIV><SPAN style="BACKGROUND-COLOR: rgb(255,255,0)" data-wiz-span="data-wiz-span">ClassLoader loader,</SPAN>:指定当前目标对象使用类加载器,获取加载器的方法是固定的</DIV><DIV><SPAN style="BACKGROUND-COLOR: rgb(255,255,0)" data-wiz-span="data-wiz-span">Class&lt;?&gt;[] interfaces,:</SPAN>目标对象实现的接口的类型,使用泛型方式确认类型</DIV><DIV><SPAN style="BACKGROUND-COLOR: rgb(255,255,0)" data-wiz-span="data-wiz-span">InvocationHandler h:</SPAN>事件处理,执行目标对象的方法时,会触发事件处理器的方法,会把当前执行目标对象的方法作为参数传入</DIV><DIV>&nbsp;</DIV></BLOCKQUOTE></PRE></BLOCKQUOTE>
<BLOCKQUOTE style="MARGIN-RIGHT: 0px" dir=ltr>
  <DIV style="MARGIN-RIGHT: 0px" dir=ltr><PRE dir=ltr>总结:<BR>代理对象不需要实现接口,但是目标对象一定要实现接口,否则不能用动态代理	</PRE><PRE dir=ltr>&nbsp;</PRE><PRE dir=ltr><H1 class="md-end-block md-heading" style='BOX-SIZING: border-box; FONT-SIZE: 2.25em; CURSOR: text; FONT-FAMILY: "Open Sans", "Clear Sans", "Helvetica Neue", Helvetica, Arial, sans-serif; WHITE-SPACE: pre-wrap; WORD-SPACING: 0px; BORDER-BOTTOM: rgb(238,238,238) 1px solid; POSITION: relative; TEXT-TRANSFORM: none; FONT-WEIGHT: bold; COLOR: rgb(51,51,51); PADDING-BOTTOM: 0.3em; FONT-STYLE: normal; ORPHANS: 2; WIDOWS: 2; LETTER-SPACING: normal; LINE-HEIGHT: 1.2; TEXT-INDENT: 0px; break-after: avoid-page; break-inside: avoid; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial' mdtype="heading" cid="n46"><SPAN class=md-plain style="BOX-SIZING: border-box" md-inline="plain"><FONT color=#ff0000>2.2cglib动态代理</FONT></SPAN></H1><P class="md-end-block md-p" style='BOX-SIZING: border-box; FONT-SIZE: 16px; FONT-FAMILY: "Open Sans", "Clear Sans", "Helvetica Neue", Helvetica, Arial, sans-serif; WHITE-SPACE: pre-wrap; WORD-SPACING: 0px; POSITION: relative; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(51,51,51); FONT-STYLE: normal; ORPHANS: 4; WIDOWS: 2; MARGIN: 0.8em 0px; LETTER-SPACING: normal; TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial' mdtype="paragraph" cid="n74"><SPAN class=md-plain style="BOX-SIZING: border-box" md-inline="plain">特点：目标对象没有实现接口也可以进行代理</SPAN></P><PRE spellcheck=false lang="" class="md-fences md-end-block ty-contain-cm modeLoaded" style="BOX-SIZING: border-box; FONT-SIZE: 0.9em; OVERFLOW: visible; MARGIN-BOTTOM: 15px; BORDER-TOP: rgb(231,234,237) 1px solid; FONT-FAMILY: var(--monospace); BORDER-RIGHT: rgb(231,234,237) 1px solid; WHITE-SPACE: normal; WORD-SPACING: 0px; MARGIN-TOP: 15px; BORDER-BOTTOM: rgb(231,234,237) 1px solid; POSITION: relative !important; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(51,51,51); PADDING-BOTTOM: 6px; FONT-STYLE: normal; TEXT-ALIGN: left; PADDING-TOP: 8px; PADDING-LEFT: 4px; BORDER-LEFT: rgb(231,234,237) 1px solid; ORPHANS: 2; WIDOWS: 2; DISPLAY: block; LETTER-SPACING: normal; PADDING-RIGHT: 4px; BACKGROUND-COLOR: rgb(248,248,248); TEXT-INDENT: 0px; break-inside: avoid; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial; background-size: inherit; background-origin: inherit; background-clip: inherit; border-radius: 3px" mdtype="fences" cid="n131"><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px">上面的静态代理和动态代理模式都是要求目标对象是实现一个接口的目标对象,但是有时候目标对象只是一个单独的对象,并没有实现任何的接口,这个时候就可以使用以目标对象子类的方式类实现代理,这种方法就叫做:Cglib代理</SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN style="BOX-SIZING: border-box" cm-text="">​</SPAN></SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px">Cglib代理,也叫作子类代理,它是在内存中构建一个子类对象从而实现对目标对象功能的扩展.</SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN style="BOX-SIZING: border-box" cm-text="">​</SPAN></SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px">JDK的动态代理有一个限制,就是使用动态代理的对象必须实现一个或多个接口,如果想目标没有实现接口的类,就可以使用Cglib实现.</SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN style="BOX-SIZING: border-box" cm-text="">​</SPAN></SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN style="BOX-SIZING: border-box" cm-text="">​</SPAN></SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px">Cglib是一个强大的高性能的代码生成包,它可以在运行期扩展java类与实现java接口.它广泛的被许多AOP的框架使用,例如Spring AOP和synaop,为他们提供方法的interception(拦截)</SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN style="BOX-SIZING: border-box" cm-text="">​</SPAN></SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN style="BOX-SIZING: border-box" cm-text="">​</SPAN></SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px">Cglib包的底层是通过使用一个小而块的字节码处理框架ASM来转换字节码并生成新的类.不鼓励直接使用ASM,因为它要求你必须对JVM内部结构包括class文件的格式和指令集都很熟悉.</SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN style="BOX-SIZING: border-box" cm-text="">​</SPAN></SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN style="BOX-SIZING: border-box" cm-text="">​</SPAN></SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px">Cglib子类代理实现方法:</SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN style="BOX-SIZING: border-box" cm-text="">​</SPAN></SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN style="BOX-SIZING: border-box" cm-text="">​</SPAN></SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px">1.需要引入cglib的jar文件,但是Spring的核心包中已经包括了Cglib功能,所以直接引入spring-core-3.2.5.jar即可.</SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN style="BOX-SIZING: border-box" cm-text="">​</SPAN></SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN style="BOX-SIZING: border-box" cm-text="">​</SPAN></SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px">2.引入功能包后,就可以在内存中动态构建子类</SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN style="BOX-SIZING: border-box" cm-text="">​</SPAN></SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN style="BOX-SIZING: border-box" cm-text="">​</SPAN></SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px">3.代理的类不能为final,否则报错</SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN style="BOX-SIZING: border-box" cm-text="">​</SPAN></SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN style="BOX-SIZING: border-box" cm-text="">​</SPAN></SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px">4.目标对象的方法如果为final/static,那么就不会被拦截,即不会执行目标对象额外的业务方法.</SPAN></PRE><P class="md-end-block md-p" style='BOX-SIZING: border-box; FONT-SIZE: 16px; FONT-FAMILY: "Open Sans", "Clear Sans", "Helvetica Neue", Helvetica, Arial, sans-serif; WHITE-SPACE: pre-wrap; WORD-SPACING: 0px; POSITION: relative; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(51,51,51); FONT-STYLE: normal; ORPHANS: 4; WIDOWS: 2; MARGIN: 0.8em 0px; LETTER-SPACING: normal; TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial' mdtype="paragraph" cid="n63"><SPAN class=md-plain style="BOX-SIZING: border-box" md-inline="plain">mybatis</SPAN></P><PRE spellcheck=false lang=java class="md-fences md-end-block ty-contain-cm modeLoaded" style="BOX-SIZING: border-box; FONT-SIZE: 0.9em; OVERFLOW: visible; MARGIN-BOTTOM: 15px; BORDER-TOP: rgb(231,234,237) 1px solid; FONT-FAMILY: var(--monospace); BORDER-RIGHT: rgb(231,234,237) 1px solid; WHITE-SPACE: normal; WORD-SPACING: 0px; MARGIN-TOP: 15px; BORDER-BOTTOM: rgb(231,234,237) 1px solid; POSITION: relative !important; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(51,51,51); PADDING-BOTTOM: 6px; FONT-STYLE: normal; TEXT-ALIGN: left; PADDING-TOP: 8px; PADDING-LEFT: 4px; BORDER-LEFT: rgb(231,234,237) 1px solid; ORPHANS: 2; WIDOWS: 2; DISPLAY: block; LETTER-SPACING: normal; PADDING-RIGHT: 4px; BACKGROUND-COLOR: rgb(248,248,248); TEXT-INDENT: 0px; break-inside: avoid; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial; background-size: inherit; background-origin: inherit; background-clip: inherit; border-radius: 3px" mdtype="fences" cid="n73"><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">SqlSessionFactory</SPAN> <SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">factory</SPAN> <SPAN class=cm-operator style="BOX-SIZING: border-box; COLOR: rgb(152,26,26)">=</SPAN> <SPAN class=cm-keyword style="BOX-SIZING: border-box; COLOR: rgb(119,0,136)">new</SPAN> <SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">SqlSessionFactoryBuilder</SPAN>.<SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">build</SPAN>(<SPAN class=cm-string style="BOX-SIZING: border-box; COLOR: rgb(170,17,17)">"/mybatis.cfg.xml"</SPAN>);</SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN style="BOX-SIZING: border-box" cm-text="">​</SPAN></SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">SqlSession</SPAN> <SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">sqlSession</SPAN> <SPAN class=cm-operator style="BOX-SIZING: border-box; COLOR: rgb(152,26,26)">=</SPAN> <SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">factory</SPAN>.<SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">openSession</SPAN>();</SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN style="BOX-SIZING: border-box" cm-text="">​</SPAN></SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN class=cm-comment style="BOX-SIZING: border-box; COLOR: rgb(170,85,0)">//通过cglib获取到代理对象</SPAN></SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">UserMapper</SPAN> <SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">userMapper</SPAN> <SPAN class=cm-operator style="BOX-SIZING: border-box; COLOR: rgb(152,26,26)">=</SPAN> <SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">sqlSession</SPAN>.<SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">getMapper</SPAN>(<SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">UserMapper</SPAN>.<SPAN class=cm-keyword style="BOX-SIZING: border-box; COLOR: rgb(119,0,136)">class</SPAN>);</SPAN></PRE><P class="md-end-block md-p" style='BOX-SIZING: border-box; FONT-SIZE: 16px; FONT-FAMILY: "Open Sans", "Clear Sans", "Helvetica Neue", Helvetica, Arial, sans-serif; WHITE-SPACE: pre-wrap; WORD-SPACING: 0px; POSITION: relative; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(51,51,51); FONT-STYLE: normal; ORPHANS: 4; WIDOWS: 2; MARGIN: 0.8em 0px; LETTER-SPACING: normal; TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial' mdtype="paragraph" cid="n71"><SPAN class=md-plain style="BOX-SIZING: border-box" md-inline="plain">cglib的实现原理(继承)：在内存当中构造一个目标对象的子类对象，返回一个目标对象的子类对象代理对象</SPAN></P><P class="md-end-block md-p" style='BOX-SIZING: border-box; FONT-SIZE: 16px; FONT-FAMILY: "Open Sans", "Clear Sans", "Helvetica Neue", Helvetica, Arial, sans-serif; WHITE-SPACE: pre-wrap; WORD-SPACING: 0px; POSITION: relative; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(51,51,51); FONT-STYLE: normal; ORPHANS: 4; WIDOWS: 2; MARGIN: 0.8em 0px; LETTER-SPACING: normal; TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial' mdtype="paragraph" cid="n79"><SPAN class=md-plain style="BOX-SIZING: border-box" md-inline="plain">案例</SPAN></P><P class="md-end-block md-p" style='BOX-SIZING: border-box; FONT-SIZE: 16px; FONT-FAMILY: "Open Sans", "Clear Sans", "Helvetica Neue", Helvetica, Arial, sans-serif; WHITE-SPACE: pre-wrap; WORD-SPACING: 0px; POSITION: relative; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(51,51,51); FONT-STYLE: normal; ORPHANS: 4; WIDOWS: 2; MARGIN: 0.8em 0px; LETTER-SPACING: normal; TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial' mdtype="paragraph" cid="n85"><SPAN class=md-plain style="BOX-SIZING: border-box" md-inline="plain">1、创建项目并导包</SPAN></P><P class="md-end-block md-p" style='BOX-SIZING: border-box; FONT-SIZE: 16px; FONT-FAMILY: "Open Sans", "Clear Sans", "Helvetica Neue", Helvetica, Arial, sans-serif; WHITE-SPACE: pre-wrap; WORD-SPACING: 0px; POSITION: relative; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(51,51,51); FONT-STYLE: normal; ORPHANS: 4; WIDOWS: 2; MARGIN: 0.8em 0px; LETTER-SPACING: normal; TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial' mdtype="paragraph" cid="n87"><SPAN class=md-plain style="BOX-SIZING: border-box" md-inline="plain">asm-4.2.jar</SPAN></P><P class="md-end-block md-p" style='BOX-SIZING: border-box; FONT-SIZE: 16px; FONT-FAMILY: "Open Sans", "Clear Sans", "Helvetica Neue", Helvetica, Arial, sans-serif; WHITE-SPACE: pre-wrap; WORD-SPACING: 0px; POSITION: relative; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(51,51,51); FONT-STYLE: normal; ORPHANS: 4; WIDOWS: 2; MARGIN: 0.8em 0px; LETTER-SPACING: normal; TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial' mdtype="paragraph" cid="n91"><SPAN class=md-plain style="BOX-SIZING: border-box" md-inline="plain">cglib-3.1.jar</SPAN></P><P class="md-end-block md-p" style='BOX-SIZING: border-box; FONT-SIZE: 16px; FONT-FAMILY: "Open Sans", "Clear Sans", "Helvetica Neue", Helvetica, Arial, sans-serif; WHITE-SPACE: pre-wrap; WORD-SPACING: 0px; POSITION: relative; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(51,51,51); FONT-STYLE: normal; ORPHANS: 4; WIDOWS: 2; MARGIN: 0.8em 0px; LETTER-SPACING: normal; TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial' mdtype="paragraph" cid="n93"><SPAN class=md-plain style="BOX-SIZING: border-box" md-inline="plain">2、创建目标类</SPAN></P><PRE spellcheck=false lang=java class="md-fences md-end-block ty-contain-cm modeLoaded" style="BOX-SIZING: border-box; FONT-SIZE: 0.9em; OVERFLOW: visible; MARGIN-BOTTOM: 15px; BORDER-TOP: rgb(231,234,237) 1px solid; FONT-FAMILY: var(--monospace); BORDER-RIGHT: rgb(231,234,237) 1px solid; WHITE-SPACE: normal; WORD-SPACING: 0px; MARGIN-TOP: 15px; BORDER-BOTTOM: rgb(231,234,237) 1px solid; POSITION: relative !important; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(51,51,51); PADDING-BOTTOM: 6px; FONT-STYLE: normal; TEXT-ALIGN: left; PADDING-TOP: 8px; PADDING-LEFT: 4px; BORDER-LEFT: rgb(231,234,237) 1px solid; ORPHANS: 2; WIDOWS: 2; DISPLAY: block; LETTER-SPACING: normal; PADDING-RIGHT: 4px; BACKGROUND-COLOR: rgb(248,248,248); TEXT-INDENT: 0px; break-inside: avoid; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial; background-size: inherit; background-origin: inherit; background-clip: inherit; border-radius: 3px" mdtype="fences" cid="n104"><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN class=cm-keyword style="BOX-SIZING: border-box; COLOR: rgb(119,0,136)">package</SPAN> <SPAN class=cm-def style="BOX-SIZING: border-box; COLOR: rgb(0,0,255)">com</SPAN>.<SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">hjh</SPAN>.<SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">dao</SPAN>.<SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">impl</SPAN>;</SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN style="BOX-SIZING: border-box" cm-text="">​</SPAN></SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN style="BOX-SIZING: border-box" cm-text="">​</SPAN></SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN class=cm-keyword style="BOX-SIZING: border-box; COLOR: rgb(119,0,136)">public</SPAN> <SPAN class=cm-keyword style="BOX-SIZING: border-box; COLOR: rgb(119,0,136)">class</SPAN> <SPAN class=cm-def style="BOX-SIZING: border-box; COLOR: rgb(0,0,255)">PersonDaoImpl</SPAN> {</SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN style="BOX-SIZING: border-box" cm-text="">​</SPAN></SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN><SPAN class=cm-keyword style="BOX-SIZING: border-box; COLOR: rgb(119,0,136)">public</SPAN> <SPAN class=cm-variable-3 style="BOX-SIZING: border-box; COLOR: rgb(0,136,85)">void</SPAN> <SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">update</SPAN>() {</SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN><SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">System</SPAN>.<SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">out</SPAN>.<SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">println</SPAN>(<SPAN class=cm-string style="BOX-SIZING: border-box; COLOR: rgb(170,17,17)">"正在更新中"</SPAN>);</SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN>}</SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN style="BOX-SIZING: border-box" cm-text="">​</SPAN></SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px">}</SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN style="BOX-SIZING: border-box" cm-text="">​</SPAN></SPAN></PRE><PRE spellcheck=false lang=java class="md-fences md-end-block ty-contain-cm modeLoaded" style="BOX-SIZING: border-box; FONT-SIZE: 0.9em; OVERFLOW: visible; MARGIN-BOTTOM: 15px; BORDER-TOP: rgb(231,234,237) 1px solid; FONT-FAMILY: var(--monospace); BORDER-RIGHT: rgb(231,234,237) 1px solid; WHITE-SPACE: normal; WORD-SPACING: 0px; MARGIN-TOP: 15px; BORDER-BOTTOM: rgb(231,234,237) 1px solid; POSITION: relative !important; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(51,51,51); PADDING-BOTTOM: 6px; FONT-STYLE: normal; TEXT-ALIGN: left; PADDING-TOP: 8px; PADDING-LEFT: 4px; BORDER-LEFT: rgb(231,234,237) 1px solid; ORPHANS: 2; WIDOWS: 2; DISPLAY: block; LETTER-SPACING: normal; PADDING-RIGHT: 4px; BACKGROUND-COLOR: rgb(248,248,248); TEXT-INDENT: 0px; break-inside: avoid; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial; background-size: inherit; background-origin: inherit; background-clip: inherit; border-radius: 3px" mdtype="fences" cid="n107"><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN class=cm-keyword style="BOX-SIZING: border-box; COLOR: rgb(119,0,136)">package</SPAN> <SPAN class=cm-def style="BOX-SIZING: border-box; COLOR: rgb(0,0,255)">com</SPAN>.<SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">hjh</SPAN>.<SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">dao</SPAN>.<SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">impl</SPAN>;</SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN style="BOX-SIZING: border-box" cm-text="">​</SPAN></SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN style="BOX-SIZING: border-box" cm-text="">​</SPAN></SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN class=cm-keyword style="BOX-SIZING: border-box; COLOR: rgb(119,0,136)">public</SPAN> <SPAN class=cm-keyword style="BOX-SIZING: border-box; COLOR: rgb(119,0,136)">class</SPAN> <SPAN class=cm-def style="BOX-SIZING: border-box; COLOR: rgb(0,0,255)">UserDaoImpl</SPAN> {</SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN style="BOX-SIZING: border-box" cm-text="">​</SPAN></SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN><SPAN class=cm-keyword style="BOX-SIZING: border-box; COLOR: rgb(119,0,136)">public</SPAN> <SPAN class=cm-variable-3 style="BOX-SIZING: border-box; COLOR: rgb(0,136,85)">void</SPAN> <SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">save</SPAN>() {</SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN><SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">System</SPAN>.<SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">out</SPAN>.<SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">println</SPAN>(<SPAN class=cm-string style="BOX-SIZING: border-box; COLOR: rgb(170,17,17)">"保存过程中~~~"</SPAN>);</SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN>}</SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN style="BOX-SIZING: border-box" cm-text="">​</SPAN></SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN><SPAN class=cm-keyword style="BOX-SIZING: border-box; COLOR: rgb(119,0,136)">public</SPAN> <SPAN class=cm-variable-3 style="BOX-SIZING: border-box; COLOR: rgb(0,136,85)">void</SPAN> <SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">delete</SPAN>() {</SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN><SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">System</SPAN>.<SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">out</SPAN>.<SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">println</SPAN>(<SPAN class=cm-string style="BOX-SIZING: border-box; COLOR: rgb(170,17,17)">"删除过程"</SPAN>);</SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN>}</SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN style="BOX-SIZING: border-box" cm-text="">​</SPAN></SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN><SPAN class=cm-keyword style="BOX-SIZING: border-box; COLOR: rgb(119,0,136)">public</SPAN> <SPAN class=cm-variable-3 style="BOX-SIZING: border-box; COLOR: rgb(0,136,85)">void</SPAN> <SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">update</SPAN>() {</SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN><SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">System</SPAN>.<SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">out</SPAN>.<SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">println</SPAN>(<SPAN class=cm-string style="BOX-SIZING: border-box; COLOR: rgb(170,17,17)">"正在更新中"</SPAN>);</SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN>}</SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px">}</SPAN></PRE><P class="md-end-block md-p" style='BOX-SIZING: border-box; FONT-SIZE: 16px; FONT-FAMILY: "Open Sans", "Clear Sans", "Helvetica Neue", Helvetica, Arial, sans-serif; WHITE-SPACE: pre-wrap; WORD-SPACING: 0px; POSITION: relative; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(51,51,51); FONT-STYLE: normal; ORPHANS: 4; WIDOWS: 2; MARGIN: 0.8em 0px; LETTER-SPACING: normal; TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial' mdtype="paragraph" cid="n105"><SPAN class=md-plain style="BOX-SIZING: border-box" md-inline="plain">3、创建代理工厂</SPAN></P><PRE spellcheck=false lang=java class="md-fences md-end-block ty-contain-cm modeLoaded" style="BOX-SIZING: border-box; FONT-SIZE: 0.9em; OVERFLOW: visible; MARGIN-BOTTOM: 15px; BORDER-TOP: rgb(231,234,237) 1px solid; FONT-FAMILY: var(--monospace); BORDER-RIGHT: rgb(231,234,237) 1px solid; WHITE-SPACE: normal; WORD-SPACING: 0px; MARGIN-TOP: 15px; BORDER-BOTTOM: rgb(231,234,237) 1px solid; POSITION: relative !important; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(51,51,51); PADDING-BOTTOM: 6px; FONT-STYLE: normal; TEXT-ALIGN: left; PADDING-TOP: 8px; PADDING-LEFT: 4px; BORDER-LEFT: rgb(231,234,237) 1px solid; ORPHANS: 2; WIDOWS: 2; DISPLAY: block; LETTER-SPACING: normal; PADDING-RIGHT: 4px; BACKGROUND-COLOR: rgb(248,248,248); TEXT-INDENT: 0px; break-inside: avoid; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial; background-size: inherit; background-origin: inherit; background-clip: inherit; border-radius: 3px" mdtype="fences" cid="n113"><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN class=cm-keyword style="BOX-SIZING: border-box; COLOR: rgb(119,0,136)">package</SPAN> <SPAN class=cm-def style="BOX-SIZING: border-box; COLOR: rgb(0,0,255)">com</SPAN>.<SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">hjh</SPAN>.<SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">proxy</SPAN>;</SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN style="BOX-SIZING: border-box" cm-text="">​</SPAN></SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN class=cm-keyword style="BOX-SIZING: border-box; COLOR: rgb(119,0,136)">import</SPAN> <SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">java</SPAN>.<SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">lang</SPAN>.<SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">reflect</SPAN>.<SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">Method</SPAN>;</SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN style="BOX-SIZING: border-box" cm-text="">​</SPAN></SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN class=cm-keyword style="BOX-SIZING: border-box; COLOR: rgb(119,0,136)">import</SPAN> <SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">net</SPAN>.<SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">sf</SPAN>.<SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">cglib</SPAN>.<SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">proxy</SPAN>.<SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">Enhancer</SPAN>;</SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN class=cm-keyword style="BOX-SIZING: border-box; COLOR: rgb(119,0,136)">import</SPAN> <SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">net</SPAN>.<SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">sf</SPAN>.<SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">cglib</SPAN>.<SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">proxy</SPAN>.<SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">MethodInterceptor</SPAN>;</SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN class=cm-keyword style="BOX-SIZING: border-box; COLOR: rgb(119,0,136)">import</SPAN> <SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">net</SPAN>.<SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">sf</SPAN>.<SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">cglib</SPAN>.<SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">proxy</SPAN>.<SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">MethodProxy</SPAN>;</SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN style="BOX-SIZING: border-box" cm-text="">​</SPAN></SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN class=cm-comment style="BOX-SIZING: border-box; COLOR: rgb(170,85,0)">/**</SPAN></SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"> <SPAN class=cm-comment style="BOX-SIZING: border-box; COLOR: rgb(170,85,0)">* 代理工厂</SPAN></SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"> <SPAN class=cm-comment style="BOX-SIZING: border-box; COLOR: rgb(170,85,0)">* @author hjh</SPAN></SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"> <SPAN class=cm-comment style="BOX-SIZING: border-box; COLOR: rgb(170,85,0)">*</SPAN></SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"> <SPAN class=cm-comment style="BOX-SIZING: border-box; COLOR: rgb(170,85,0)">*/</SPAN></SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN class=cm-keyword style="BOX-SIZING: border-box; COLOR: rgb(119,0,136)">public</SPAN> <SPAN class=cm-keyword style="BOX-SIZING: border-box; COLOR: rgb(119,0,136)">class</SPAN> <SPAN class=cm-def style="BOX-SIZING: border-box; COLOR: rgb(0,0,255)">ProxyFactory</SPAN> <SPAN class=cm-keyword style="BOX-SIZING: border-box; COLOR: rgb(119,0,136)">implements</SPAN> <SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">MethodInterceptor</SPAN> {</SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN><SPAN class=cm-comment style="BOX-SIZING: border-box; COLOR: rgb(170,85,0)">/**</SPAN></SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN> <SPAN class=cm-comment style="BOX-SIZING: border-box; COLOR: rgb(170,85,0)">* 目标对象</SPAN></SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN> <SPAN class=cm-comment style="BOX-SIZING: border-box; COLOR: rgb(170,85,0)">*/</SPAN></SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN><SPAN class=cm-keyword style="BOX-SIZING: border-box; COLOR: rgb(119,0,136)">private</SPAN> <SPAN class=cm-variable-3 style="BOX-SIZING: border-box; COLOR: rgb(0,136,85)">Object</SPAN> <SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">target</SPAN>;</SPAN><BR><SPAN role=presentation class=cm-tab-wrap-hack style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN></SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN><SPAN class=cm-comment style="BOX-SIZING: border-box; COLOR: rgb(170,85,0)">/**</SPAN></SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN> <SPAN class=cm-comment style="BOX-SIZING: border-box; COLOR: rgb(170,85,0)">* 初始化目标对象</SPAN></SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN> <SPAN class=cm-comment style="BOX-SIZING: border-box; COLOR: rgb(170,85,0)">* @param target</SPAN></SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN> <SPAN class=cm-comment style="BOX-SIZING: border-box; COLOR: rgb(170,85,0)">*/</SPAN></SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN><SPAN class=cm-keyword style="BOX-SIZING: border-box; COLOR: rgb(119,0,136)">public</SPAN> <SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">ProxyFactory</SPAN>(<SPAN class=cm-variable-3 style="BOX-SIZING: border-box; COLOR: rgb(0,136,85)">Object</SPAN> <SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">target</SPAN>) {</SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN><SPAN class=cm-keyword style="BOX-SIZING: border-box; COLOR: rgb(119,0,136)">this</SPAN>.<SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">target</SPAN> <SPAN class=cm-operator style="BOX-SIZING: border-box; COLOR: rgb(152,26,26)">=</SPAN> <SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">target</SPAN>;</SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN>}</SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN style="BOX-SIZING: border-box" cm-text="">​</SPAN></SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN><SPAN class=cm-comment style="BOX-SIZING: border-box; COLOR: rgb(170,85,0)">/**</SPAN></SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN> <SPAN class=cm-comment style="BOX-SIZING: border-box; COLOR: rgb(170,85,0)">* 获取代理对象的方法</SPAN></SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN> <SPAN class=cm-comment style="BOX-SIZING: border-box; COLOR: rgb(170,85,0)">*/</SPAN></SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN><SPAN class=cm-keyword style="BOX-SIZING: border-box; COLOR: rgb(119,0,136)">public</SPAN> <SPAN class=cm-variable-3 style="BOX-SIZING: border-box; COLOR: rgb(0,136,85)">Object</SPAN> <SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">getProxyInstance</SPAN>() {</SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN><SPAN class=cm-comment style="BOX-SIZING: border-box; COLOR: rgb(170,85,0)">// 1、创建一个子类对象的构造器</SPAN></SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN><SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">Enhancer</SPAN> <SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">enhancer</SPAN> <SPAN class=cm-operator style="BOX-SIZING: border-box; COLOR: rgb(152,26,26)">=</SPAN> <SPAN class=cm-keyword style="BOX-SIZING: border-box; COLOR: rgb(119,0,136)">new</SPAN> <SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">Enhancer</SPAN>();</SPAN><BR><SPAN role=presentation class=cm-tab-wrap-hack style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN></SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN><SPAN class=cm-comment style="BOX-SIZING: border-box; COLOR: rgb(170,85,0)">// 2、设置父类</SPAN></SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN><SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">enhancer</SPAN>.<SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">setSuperclass</SPAN>(<SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">target</SPAN>.<SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">getClass</SPAN>());</SPAN><BR><SPAN role=presentation class=cm-tab-wrap-hack style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN></SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN><SPAN class=cm-comment style="BOX-SIZING: border-box; COLOR: rgb(170,85,0)">// 3、设置回调，就是当前的工厂对象 &nbsp; &nbsp;  -- 去调用拦截的方法 &nbsp; &nbsp; -- this =&gt; new ProxyFactory();</SPAN></SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN><SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">enhancer</SPAN>.<SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">setCallback</SPAN>(<SPAN class=cm-keyword style="BOX-SIZING: border-box; COLOR: rgb(119,0,136)">this</SPAN>);</SPAN><BR><SPAN role=presentation class=cm-tab-wrap-hack style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN></SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN><SPAN class=cm-comment style="BOX-SIZING: border-box; COLOR: rgb(170,85,0)">// 4 、在内存里面生成代理对象</SPAN></SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN><SPAN class=cm-keyword style="BOX-SIZING: border-box; COLOR: rgb(119,0,136)">return</SPAN> <SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">enhancer</SPAN>.<SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">create</SPAN>();</SPAN><BR><SPAN role=presentation class=cm-tab-wrap-hack style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN></SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN>}</SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN style="BOX-SIZING: border-box" cm-text="">​</SPAN></SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN><SPAN class=cm-comment style="BOX-SIZING: border-box; COLOR: rgb(170,85,0)">/**</SPAN></SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN> <SPAN class=cm-comment style="BOX-SIZING: border-box; COLOR: rgb(170,85,0)">*  拦截的方法</SPAN></SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN> <SPAN class=cm-comment style="BOX-SIZING: border-box; COLOR: rgb(170,85,0)">* arg0 : 目标对象</SPAN></SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN> <SPAN class=cm-comment style="BOX-SIZING: border-box; COLOR: rgb(170,85,0)">* arg1: 目标对象的方法</SPAN></SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN> <SPAN class=cm-comment style="BOX-SIZING: border-box; COLOR: rgb(170,85,0)">* arg2:参数</SPAN></SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN> <SPAN class=cm-comment style="BOX-SIZING: border-box; COLOR: rgb(170,85,0)">* arg3:代理的方法(cglib本质是继承，继承了的方法)</SPAN></SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN> <SPAN class=cm-comment style="BOX-SIZING: border-box; COLOR: rgb(170,85,0)">*/</SPAN></SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN><SPAN class=cm-meta style="BOX-SIZING: border-box; COLOR: rgb(85,85,85)">@Override</SPAN></SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN><SPAN class=cm-keyword style="BOX-SIZING: border-box; COLOR: rgb(119,0,136)">public</SPAN> <SPAN class=cm-variable-3 style="BOX-SIZING: border-box; COLOR: rgb(0,136,85)">Object</SPAN> <SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">intercept</SPAN>(<SPAN class=cm-variable-3 style="BOX-SIZING: border-box; COLOR: rgb(0,136,85)">Object</SPAN> <SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">arg0</SPAN>, <SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">Method</SPAN> <SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">arg1</SPAN>, <SPAN class=cm-variable-3 style="BOX-SIZING: border-box; COLOR: rgb(0,136,85)">Object</SPAN>[] <SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">arg2</SPAN>, <SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">MethodProxy</SPAN> <SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">arg3</SPAN>) <SPAN class=cm-keyword style="BOX-SIZING: border-box; COLOR: rgb(119,0,136)">throws</SPAN> <SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">Throwable</SPAN> {</SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN><SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">startTransaction</SPAN>();</SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN><SPAN class=cm-variable-3 style="BOX-SIZING: border-box; COLOR: rgb(0,136,85)">Object</SPAN> <SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">invoke</SPAN> <SPAN class=cm-operator style="BOX-SIZING: border-box; COLOR: rgb(152,26,26)">=</SPAN> <SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">arg1</SPAN>.<SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">invoke</SPAN>(<SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">target</SPAN>, <SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">arg2</SPAN>);</SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN><SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">endTransaction</SPAN>();</SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN><SPAN class=cm-keyword style="BOX-SIZING: border-box; COLOR: rgb(119,0,136)">return</SPAN> <SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">invoke</SPAN>;</SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN>}</SPAN><BR><SPAN role=presentation class=cm-tab-wrap-hack style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN></SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN><SPAN class=cm-comment style="BOX-SIZING: border-box; COLOR: rgb(170,85,0)">/*</SPAN></SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN> <SPAN class=cm-comment style="BOX-SIZING: border-box; COLOR: rgb(170,85,0)">* 开启前置增强</SPAN></SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN> <SPAN class=cm-comment style="BOX-SIZING: border-box; COLOR: rgb(170,85,0)">*/</SPAN></SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN><SPAN class=cm-keyword style="BOX-SIZING: border-box; COLOR: rgb(119,0,136)">public</SPAN> <SPAN class=cm-variable-3 style="BOX-SIZING: border-box; COLOR: rgb(0,136,85)">void</SPAN> <SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">startTransaction</SPAN>() {</SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN><SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">System</SPAN>.<SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">out</SPAN>.<SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">println</SPAN>(<SPAN class=cm-string style="BOX-SIZING: border-box; COLOR: rgb(170,17,17)">"开启事务"</SPAN>);</SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN>}</SPAN><BR><SPAN role=presentation class=cm-tab-wrap-hack style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN></SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN><SPAN class=cm-comment style="BOX-SIZING: border-box; COLOR: rgb(170,85,0)">/*</SPAN></SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN> <SPAN class=cm-comment style="BOX-SIZING: border-box; COLOR: rgb(170,85,0)">* 开启后置增强</SPAN></SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN> <SPAN class=cm-comment style="BOX-SIZING: border-box; COLOR: rgb(170,85,0)">*/</SPAN></SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN><SPAN class=cm-keyword style="BOX-SIZING: border-box; COLOR: rgb(119,0,136)">public</SPAN> <SPAN class=cm-variable-3 style="BOX-SIZING: border-box; COLOR: rgb(0,136,85)">void</SPAN> <SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">endTransaction</SPAN>() {</SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN><SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">System</SPAN>.<SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">out</SPAN>.<SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">println</SPAN>(<SPAN class=cm-string style="BOX-SIZING: border-box; COLOR: rgb(170,17,17)">"提交事务"</SPAN>);</SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN><SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">System</SPAN>.<SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">out</SPAN>.<SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">println</SPAN>(<SPAN class=cm-string style="BOX-SIZING: border-box; COLOR: rgb(170,17,17)">"关闭资源"</SPAN>);</SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN>}</SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px">}</SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN style="BOX-SIZING: border-box" cm-text="">​</SPAN></SPAN></PRE><P class="md-end-block md-p" style='BOX-SIZING: border-box; FONT-SIZE: 16px; FONT-FAMILY: "Open Sans", "Clear Sans", "Helvetica Neue", Helvetica, Arial, sans-serif; WHITE-SPACE: pre-wrap; WORD-SPACING: 0px; POSITION: relative; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(51,51,51); FONT-STYLE: normal; ORPHANS: 4; WIDOWS: 2; MARGIN: 0.8em 0px; LETTER-SPACING: normal; TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial' mdtype="paragraph" cid="n111"><SPAN class=md-plain style="BOX-SIZING: border-box" md-inline="plain">4、测视类</SPAN></P><PRE spellcheck=false lang=java class="md-fences md-end-block ty-contain-cm modeLoaded" style="BOX-SIZING: border-box; FONT-SIZE: 0.9em; OVERFLOW: visible; MARGIN-BOTTOM: 15px; BORDER-TOP: rgb(231,234,237) 1px solid; FONT-FAMILY: var(--monospace); BORDER-RIGHT: rgb(231,234,237) 1px solid; WHITE-SPACE: normal; WORD-SPACING: 0px; MARGIN-TOP: 15px; BORDER-BOTTOM: rgb(231,234,237) 1px solid; POSITION: relative !important; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(51,51,51); PADDING-BOTTOM: 6px; FONT-STYLE: normal; TEXT-ALIGN: left; PADDING-TOP: 8px; PADDING-LEFT: 4px; BORDER-LEFT: rgb(231,234,237) 1px solid; ORPHANS: 2; WIDOWS: 2; DISPLAY: block; LETTER-SPACING: normal; PADDING-RIGHT: 4px; BACKGROUND-COLOR: rgb(248,248,248); TEXT-INDENT: 0px; break-inside: avoid; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial; background-size: inherit; background-origin: inherit; background-clip: inherit; border-radius: 3px" mdtype="fences" cid="n121"><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN class=cm-keyword style="BOX-SIZING: border-box; COLOR: rgb(119,0,136)">package</SPAN> <SPAN class=cm-def style="BOX-SIZING: border-box; COLOR: rgb(0,0,255)">com</SPAN>.<SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">hjh</SPAN>.<SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">test</SPAN>;</SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN style="BOX-SIZING: border-box" cm-text="">​</SPAN></SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN class=cm-keyword style="BOX-SIZING: border-box; COLOR: rgb(119,0,136)">import</SPAN> <SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">com</SPAN>.<SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">hjh</SPAN>.<SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">dao</SPAN>.<SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">impl</SPAN>.<SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">UserDaoImpl</SPAN>;</SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN class=cm-keyword style="BOX-SIZING: border-box; COLOR: rgb(119,0,136)">import</SPAN> <SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">com</SPAN>.<SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">hjh</SPAN>.<SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">proxy</SPAN>.<SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">ProxyFactory</SPAN>;</SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN style="BOX-SIZING: border-box" cm-text="">​</SPAN></SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN class=cm-keyword style="BOX-SIZING: border-box; COLOR: rgb(119,0,136)">public</SPAN> <SPAN class=cm-keyword style="BOX-SIZING: border-box; COLOR: rgb(119,0,136)">class</SPAN> <SPAN class=cm-def style="BOX-SIZING: border-box; COLOR: rgb(0,0,255)">TestUser</SPAN> {</SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN><SPAN class=cm-keyword style="BOX-SIZING: border-box; COLOR: rgb(119,0,136)">public</SPAN> <SPAN class=cm-keyword style="BOX-SIZING: border-box; COLOR: rgb(119,0,136)">static</SPAN> <SPAN class=cm-variable-3 style="BOX-SIZING: border-box; COLOR: rgb(0,136,85)">void</SPAN> <SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">main</SPAN>(<SPAN class=cm-variable-3 style="BOX-SIZING: border-box; COLOR: rgb(0,136,85)">String</SPAN>[] <SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">args</SPAN>) {</SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN><SPAN class=cm-comment style="BOX-SIZING: border-box; COLOR: rgb(170,85,0)">// 1、创建目标对象</SPAN></SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN><SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">UserDaoImpl</SPAN> <SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">userDaoImpl</SPAN> <SPAN class=cm-operator style="BOX-SIZING: border-box; COLOR: rgb(152,26,26)">=</SPAN> <SPAN class=cm-keyword style="BOX-SIZING: border-box; COLOR: rgb(119,0,136)">new</SPAN> <SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">UserDaoImpl</SPAN>();</SPAN><BR><SPAN role=presentation class=cm-tab-wrap-hack style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN></SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN><SPAN class=cm-comment style="BOX-SIZING: border-box; COLOR: rgb(170,85,0)">// 2、创建代理工厂</SPAN></SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN><SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">ProxyFactory</SPAN> <SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">proxyFactory</SPAN> <SPAN class=cm-operator style="BOX-SIZING: border-box; COLOR: rgb(152,26,26)">=</SPAN> <SPAN class=cm-keyword style="BOX-SIZING: border-box; COLOR: rgb(119,0,136)">new</SPAN> <SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">ProxyFactory</SPAN>(<SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">userDaoImpl</SPAN>);</SPAN><BR><SPAN role=presentation class=cm-tab-wrap-hack style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN></SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN> &nbsp; &nbsp;<SPAN class=cm-comment style="BOX-SIZING: border-box; COLOR: rgb(170,85,0)">// 3、创建代理对象</SPAN></SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN><SPAN class=cm-comment style="BOX-SIZING: border-box; COLOR: rgb(170,85,0)">//Object proxyInstance = proxyFactory.getProxyInstance();</SPAN></SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN><SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">UserDaoImpl</SPAN> <SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">impl</SPAN> <SPAN class=cm-operator style="BOX-SIZING: border-box; COLOR: rgb(152,26,26)">=</SPAN> (<SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">UserDaoImpl</SPAN>) <SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">proxyFactory</SPAN>.<SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">getProxyInstance</SPAN>();</SPAN><BR><SPAN role=presentation class=cm-tab-wrap-hack style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN></SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN><SPAN class=cm-comment style="BOX-SIZING: border-box; COLOR: rgb(170,85,0)">//System.out.println(proxyInstance.getClass().getSimpleName()); // UserDaoImpl$$EnhancerByCGLIB$$1758e3be</SPAN></SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN><SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">impl</SPAN>.<SPAN class=cm-variable style="BOX-SIZING: border-box; COLOR: rgb(0,0,0)">delete</SPAN>();</SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN role=presentation class=cm-tab style="BOX-SIZING: border-box; FONT-FAMILY: var(--monospace); POSITION: relative; DISPLAY: inline-block" cm-text="&#9;">    </SPAN>}</SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px">}</SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN style="BOX-SIZING: border-box" cm-text="">​</SPAN></SPAN></PRE><P class="md-end-block md-p" style='BOX-SIZING: border-box; FONT-SIZE: 16px; FONT-FAMILY: "Open Sans", "Clear Sans", "Helvetica Neue", Helvetica, Arial, sans-serif; WHITE-SPACE: pre-wrap; WORD-SPACING: 0px; POSITION: relative; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(51,51,51); FONT-STYLE: normal; ORPHANS: 4; WIDOWS: 2; MARGIN: 0.8em 0px; LETTER-SPACING: normal; TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial' mdtype="paragraph" cid="n119"><SPAN class=md-plain style="BOX-SIZING: border-box" md-inline="plain">总结</SPAN></P><PRE spellcheck=false lang="" class="md-fences md-end-block ty-contain-cm modeLoaded" style="BOX-SIZING: border-box; FONT-SIZE: 0.9em; OVERFLOW: visible; MARGIN-BOTTOM: 15px; BORDER-TOP: rgb(231,234,237) 1px solid; FONT-FAMILY: var(--monospace); BORDER-RIGHT: rgb(231,234,237) 1px solid; WHITE-SPACE: normal; WORD-SPACING: 0px; MARGIN-TOP: 15px; BORDER-BOTTOM: rgb(231,234,237) 1px solid; POSITION: relative !important; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(51,51,51); PADDING-BOTTOM: 6px; FONT-STYLE: normal; TEXT-ALIGN: left; PADDING-TOP: 8px; PADDING-LEFT: 4px; BORDER-LEFT: rgb(231,234,237) 1px solid; ORPHANS: 2; WIDOWS: 2; DISPLAY: block; LETTER-SPACING: normal; PADDING-RIGHT: 4px; BACKGROUND-COLOR: rgb(248,248,248); TEXT-INDENT: 0px; break-inside: avoid; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial; background-size: inherit; background-origin: inherit; background-clip: inherit; border-radius: 3px" mdtype="fences" cid="n126"><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px">在Spring的AOP编程中:</SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN style="BOX-SIZING: border-box" cm-text="">​</SPAN></SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px">如果加入容器的目标对象有实现接口,用JDK代理</SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px"><SPAN style="BOX-SIZING: border-box" cm-text="">​</SPAN></SPAN><BR><SPAN role=presentation style="BOX-SIZING: border-box; PADDING-RIGHT: 0px">如果目标对象没有实现接口,用Cglib代理</SPAN></PRE><BR class=Apple-interchange-newline></PRE><PRE dir=ltr>&nbsp;</PRE></DIV></BLOCKQUOTE></SPAN></FONT></FONT></BODY></HTML>
